Решение входа в систему без пароля

Примечание - данный вариант протестирован на Centos 7. На других системах по рассказам гугла некоторые моменты могут отличаться.

Вариант 1 входа без пароля 

1. При запуске, в момент выбора системы нажимаем 'e', попадаем в редактор параметров загрузки

2. Находим в параметрах строку, начинающуюся с 'linux16'. В данной строке оставляем название загружаемого ядра и UUID рутового диска. Из остальных параметров в данной строке можно оставить только важные, а всю прочую шваль убрать (иначе загрузка системы выполняется некоректно или виснет). Изменяем значение ro на rw для того, чтобы файловая система была доступна не только на чтение, но и на запись. 

3. В конце строки добавляем параметр single init=/bin/bash (можно ввести и init=/bin/sh, результат будет тем же). Для выхода и продолжения загрузки нажимаем ctrl-x. В определенный момент загрузка системы завершится с появлением строки bash-4.2# и можно вводить команды, например смены пароля.

4. Есть одна тонкость - необходимо проверить параметр SELINUX /etc/selinux/config (в новых системах). Нужно заменить строку SELINUX=enforcing на SELINUX=disabled. В противном случае после смены пароля и перезагрузки получим неприятную ситуацию - при вводе логина и пароля будет сообщение Login incorrect

a) Если SELINUX еще не выключен и в параметрах загрузки оставлен параметр 'ro' (read-only), то необходимо ввести следующие команды:
# mount -o remount,rw /
# rpm --setperms `rpm -qa`
# passwd
Enter new password: (вводим новый пароль)
Repeat... (повторяем новый пароль)
# vi /etc/selinux/config (меняем SELINUX=enforcing на SELINUX=disabled)
# sync
# mount -o remount,ro /

b) Если SELINUX  уже выключен ранее и в параметрах загрузки параметр 'ro' заменен на 'rw', то для смены пароля достаточно одной команды:
# passwd
Enter new password: (вводим новый пароль)
Repeat... (повторяем новый пароль)

5. Если выйти командой exit, то система подвисает. Причину не нашел. Гугль говорит следующее: "... и затем отключите питание компьютера/перезагрузите физической кнопкой." (https://hackware.ru/?p=3801)

Вариант 2 входа без пароля

1. Выполняем п.1 и п.2 варианта 1

2. В конце строки добавляем параметр rd.break. Для выхода и продолжения загрузки нажимаем ctrl-x. В определенный момент загрузка системы завершится с появлением строки switch_root:/#. Необходимо ввести следующую команду:
# chroot /sysroot

3. Появится строка sh-4.2# и можно вводить команды для смены пароля:
# passwd
Enter new password: (вводим новый пароль)
Repeat... (повторяем новый пароль)

4. Выполняем перезагрузку
# exit
# reboot

Вариант 3 входа без пароля

1. Выполняем п.1 и п.2 варианта 1

2. В конце строки добавляем параметр init=/sysroot/bin/sh. Для выхода и продолжения загрузки нажимаем ctrl-x. В определенный момент загрузка системы завершится с появлением строки :/#. Необходимо ввести следующую команду:
# chroot /sysroot

3. строка останется такой же :/#, но уже можно вводить команду для смены пароля:
# passwd
Enter new password: (вводим новый пароль)
Repeat... (повторяем новый пароль)

4. Выполняем перезагрузку
# exit
# reboot


Решение переименовывания Volume Group в LVM

